<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no">
    <link rel="stylesheet" type="text/css" href="./layui/css/layui.css">
    <style>
        #myForm{
            background: white;
            padding: 30px;
        }
        .layui-layedit-tool{
            /*display: none!important;*/
        }
    </style>
</head>
<body>
<div class="content_body">
    <form id="myForm" class="layui-form white-bg radius">
        <div class="layui-form-item">
            <label class="layui-form-label">标题</label>
            <div class="layui-input-block">
                <input type="text"  class="layui-input" name="title" >
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">发布人</label>
            <div class="layui-input-block">
                <input type="text"  class="layui-input" name="name" >
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">内容</label>
            <div class="layui-input-block">
                <textarea class="textarea" id="lay_edit" lay-verify="content" name = "text" ></textarea>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button type="submit" lay-submit="" class="layui-btn layui-btn-radius layui-btn-normal" style="width: 150px" lay-filter="formSubmit" >保存</button>
            </div>
        </div>
    </form>
    <h2></h2>
</div>
<script src="./layui/layui.js"></script>
<script>
    layui.define(function () {
        let form = layui.form;
        let layer = layui.layer;
        let layedit = layui.layedit;
        let $ = layui.jquery;
        $(function () {
            // layedit.set({	//设置图片接口
            //     uploadImage: {
            //         url: 'layEdit/upload', //接口url
            //         type: 'post'
            //     }
            // });
            //创建一个编辑器
            // var index = layedit.build('lay_edit',{
            //     height: 350
            // });
            // //提交时把值同步到文本域中
            // form.verify({
            //     //content富文本域中的lay-verify值
            //     content: function(value) {
            //         return layedit.sync(index);
            //     }
            //
            // });
            // $('h2').text(index)


            form.on("submit(formSubmit)", function (data) {
                console.log(data.field);
                var text = data.field.text; //先取出未转换格式前端数据
                var des = text.replace(/\r\n/g, '<br/>').replace(/\n/g, '<br/>').replace(/\s/g, ' ');  //转换格式
                $("h2").empty();
                $("h2").append(des);

                // let text=data.field.text
                // function init() {
                //     var text = data.field.text; //先取出未转换格式前端数据
                //     var des = text.replace(/\r\n/g, '<br/>').replace(/\n/g, '<br/>').replace(/\s/g, ' ');  //转换格式
                //     $("h2").empty();
                //     $("h2").append(des);
                // }
                // init()

                return false;
            })
        })
    })
</script>
</body>
</html>